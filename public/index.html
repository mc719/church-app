<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Church Database</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/styles/main.css">
</head>
<body class="light-theme login-active">
    <!-- Login Modal -->
    <div id="loginModal" class="modal-overlay active">
        <div class="login-modal">
            <div class="login-logo">
                <div id="loginLogoPlaceholder" class="login-logo-placeholder">
                    <i class="fas fa-church"></i>
                </div>
                <img id="loginLogoImage" class="logo-img" style="display: none;" alt="Church Logo">
                <h2 class="login-title" id="loginTitle">Welcome Back</h2>
                <p class="login-subtitle" id="loginSubtitle">Sign in to your account</p>
            </div>
            
            <form id="loginForm">
                <div class="form-group">
                    <input type="text" id="loginUsername" class="form-control" placeholder="Username" required>
                </div>
                <div class="form-group">
                    <input type="password" id="loginPassword" class="form-control" placeholder="Password" required>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-success" style="width: 100%;">
                        <i class="fas fa-sign-in-alt"></i> Sign In
                    </button>
                </div>
            </form>
            
            <a href="#" class="forgot-password" onclick="showForgotPassword()">
                Forgot Password?
            </a>
        </div>
    </div>
    
    <!-- Forgot Password Modal -->
    <div id="forgotPasswordModal" class="modal-overlay">
        <div class="modal forgot-modal">
            <div class="modal-header">
                <h3>Reset Password</h3>
                <button class="close-modal" onclick="closeForgotPasswordModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="forgotStep1">
                    <p style="text-align: center; margin-bottom: 24px; line-height: 1.6;">
                        Enter the email linked to your account to receive a one-time login code.
                    </p>
                    <div class="form-group">
                        <label for="forgotEmail">Email *</label>
                        <input type="email" id="forgotEmail" class="form-control" placeholder="you@example.com" required>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn" onclick="showLoginModal()">
                            <i class="fas fa-sign-in-alt"></i> Login
                        </button>
                        <button type="button" class="btn btn-success" onclick="sendResetCode()">Send Code</button>
                    </div>
                </div>
                
                <div id="forgotStep2" style="display: none;">
                    <p style="text-align: center; margin-bottom: 24px; line-height: 1.6;">
                        Enter the 6-digit code sent to your email.
                    </p>
                    <div class="code-inputs">
                        <input type="text" maxlength="1" class="code-input" oninput="moveToNext(this, 1)">
                        <input type="text" maxlength="1" class="code-input" oninput="moveToNext(this, 2)">
                        <input type="text" maxlength="1" class="code-input" oninput="moveToNext(this, 3)">
                        <input type="text" maxlength="1" class="code-input" oninput="moveToNext(this, 4)">
                        <input type="text" maxlength="1" class="code-input" oninput="moveToNext(this, 5)">
                        <input type="text" maxlength="1" class="code-input" oninput="moveToNext(this, 6)">
                    </div>
                    <div style="text-align: center; margin: 20px 0;">
                        <a href="#" onclick="sendResetCode()" style="color: var(--secondary-color); text-decoration: none;">
                            <i class="fas fa-redo"></i> Resend Code
                        </a>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn" onclick="showLoginModal()">
                            <i class="fas fa-sign-in-alt"></i> Login
                        </button>
                        <button type="button" class="btn btn-success" onclick="verifyResetCode()">Verify Code</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Idle Timeout Modal -->
    <div id="idleModal" class="modal-overlay confirmation-modal">
        <div class="modal idle-modal">
            <div class="modal-body">
                <div class="confirmation-icon">
                    <i class="fas fa-clock"></i>
                </div>
                <p class="confirmation-text idle-message">
                    You've been idle for 5 minutes. Are you still there?
                </p>
                <div class="idle-countdown" id="idleCountdown">
                    30
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-success" id="stayLoggedInBtn">
                        <i class="fas fa-check"></i> Stay Logged In
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Delete Confirmation Modal -->
    <div id="deleteConfirmModal" class="modal-overlay confirmation-modal">
        <div class="modal">
            <div class="modal-body">
                <div class="confirmation-icon">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <p class="confirmation-text" id="deleteConfirmText">
                    Are you sure you want to delete this item? This action cannot be undone.
                </p>
                <div class="form-actions">
                    <button type="button" class="btn" onclick="closeModal('deleteConfirmModal')">Cancel</button>
                    <button type="button" class="btn btn-danger" id="confirmDeleteBtn">Delete</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Add New Cell Modal -->
    <div id="newCellModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Add New Cell</h3>
                <button class="close-modal" onclick="closeModal('newCellModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="newCellForm">
                    <div class="form-group">
                        <label for="cellName">Cell Name *</label>
                        <input type="text" id="cellName" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="cellVenue">Venue *</label>
                        <input type="text" id="cellVenue" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="cellDay">Day of Meeting *</label>
                        <select id="cellDay" class="form-control" required>
                            <option value="">Select Day</option>
                            <option value="Monday">Monday</option>
                            <option value="Tuesday">Tuesday</option>
                            <option value="Wednesday">Wednesday</option>
                            <option value="Thursday">Thursday</option>
                            <option value="Friday">Friday</option>
                            <option value="Saturday">Saturday</option>
                            <option value="Sunday">Sunday</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="cellTime">Time *</label>
                        <input type="time" id="cellTime" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="cellDescription">Description</label>
                        <textarea id="cellDescription" class="form-control" rows="4"></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn" onclick="closeModal('newCellModal')">Cancel</button>
                        <button type="submit" class="btn btn-success">Create Cell</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Member Details Modal -->
    <div id="memberDetailsModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Member Details</h3>
                <button class="close-modal" onclick="closeModal('memberDetailsModal')">&times;</button>
            </div>
            <div class="modal-body" id="memberDetailsBody">
                <!-- Filled dynamically -->
            </div>
        </div>
    </div>

    <!-- Edit Cell Modal -->
    <div id="editCellModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Edit Cell</h3>
                <button class="close-modal" onclick="closeModal('editCellModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="editCellForm">
                    <input type="hidden" id="editCellId">
                    <div class="form-group">
                        <label for="editCellName">Cell Name *</label>
                        <input type="text" id="editCellName" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="editCellVenue">Venue *</label>
                        <input type="text" id="editCellVenue" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="editCellDay">Day of Meeting *</label>
                        <select id="editCellDay" class="form-control" required>
                            <option value="">Select Day</option>
                            <option value="Monday">Monday</option>
                            <option value="Tuesday">Tuesday</option>
                            <option value="Wednesday">Wednesday</option>
                            <option value="Thursday">Thursday</option>
                            <option value="Friday">Friday</option>
                            <option value="Saturday">Saturday</option>
                            <option value="Sunday">Sunday</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="editCellTime">Time *</label>
                        <input type="time" id="editCellTime" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="editCellDescription">Description</label>
                        <textarea id="editCellDescription" class="form-control" rows="4"></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn" onclick="closeModal('editCellModal')">Cancel</button>
                        <button type="submit" class="btn btn-success">Save Changes</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Report Modal -->
    <div id="addReportModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Add New Report</h3>
                <button class="close-modal" onclick="closeModal('addReportModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="addReportForm">
                    <input type="hidden" id="reportCellId">
                    <div class="form-group">
                        <label for="reportDate">Date *</label>
                        <input type="date" id="reportDate" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="reportTime">Time *</label>
                        <input type="time" id="reportTime" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="reportVenue">Venue *</label>
                        <input type="text" id="reportVenue" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="reportMeetingType">Meeting Type *</label>
                        <select id="reportMeetingType" class="form-control" required>
                            <option value="">Select Type</option>
                            <option value="prayer">Prayer and Planning</option>
                            <option value="bible-study-1">Bible Study 1</option>
                            <option value="bible-study-2">Bible Study 2</option>
                            <option value="outreach">Outreach Meeting</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Attendees</label>
                        <div id="attendeesContainer" class="attendees-container">
                            <!-- Attendees will be populated here -->
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="reportDescription">Description</label>
                        <textarea id="reportDescription" class="form-control" rows="4" placeholder="Enter meeting notes, prayer points, etc."></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn" onclick="closeModal('addReportModal')">Cancel</button>
                        <button type="submit" class="btn btn-success">Save Report</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Add Member Modal -->
    <div id="addMemberModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Add New Member</h3>
                <button class="close-modal" onclick="closeModal('addMemberModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="addMemberForm">
                    <input type="hidden" id="memberCellId">
                    <div class="form-group">
                        <label for="memberTitle">Title *</label>
                        <select id="memberTitle" class="form-control" required>
                            <option value="">Select Title</option>
                            <option value="Brother">Brother</option>
                            <option value="Sister">Sister</option>
                            <option value="Dcns">Dcns</option>
                            <option value="Dcn">Dcn</option>
                            <option value="Pastor">Pastor</option>
                            <option value="Mr">Mr</option>
                            <option value="Mrs">Mrs</option>
                            <option value="Miss">Miss</option>
                            <option value="Master">Master</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="memberName">Full Name *</label>
                        <input type="text" id="memberName" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="memberGender">Gender *</label>
                        <select id="memberGender" class="form-control" required>
                            <option value="">Select Gender</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="memberMobile">Mobile Number *</label>
                        <input type="tel" id="memberMobile" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="memberEmail">Email Address</label>
                        <input type="email" id="memberEmail" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="memberDob">Date of Birth</label>
                        <input type="date" id="memberDob" class="form-control">
                        <small class="helper-text">Stored as day and month for birthdays.</small>
                    </div>
                    <div class="form-group">
                        <label for="memberRole">Cell Role *</label>
                        <select id="memberRole" class="form-control" required>
                            <option value="">Select Role</option>
                            <option value="Cell Leader">Cell Leader</option>
                            <option value="Assistant Leader">Assistant Leader</option>
                            <option value="Member">Member</option>
                            <option value="New Member">New Member</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>First-Timer?</label>
                        <div class="highlight-toggle-row">
                            <label class="toggle-switch">
                                <input type="checkbox" id="memberHighlightToggle">
                                <span class="toggle-slider"></span>
                            </label>
                            <span class="toggle-label" id="memberHighlightText">No</span>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn" onclick="closeModal('addMemberModal')">Cancel</button>
                        <button type="submit" class="btn btn-success">Add Member</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Edit Member Modal -->
    <div id="editMemberModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Edit Member</h3>
                <button class="close-modal" onclick="closeModal('editMemberModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="editMemberForm">
                    <input type="hidden" id="editMemberId">
                    <input type="hidden" id="editMemberCellId">
                    <div class="form-group">
                        <label for="editMemberTitle">Title *</label>
                        <select id="editMemberTitle" class="form-control" required>
                            <option value="">Select Title</option>
                            <option value="Brother">Brother</option>
                            <option value="Sister">Sister</option>
                            <option value="Dcns">Dcns</option>
                            <option value="Dcn">Dcn</option>
                            <option value="Pastor">Pastor</option>
                            <option value="Mr">Mr</option>
                            <option value="Mrs">Mrs</option>
                            <option value="Miss">Miss</option>
                            <option value="Master">Master</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="editMemberName">Full Name *</label>
                        <input type="text" id="editMemberName" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="editMemberGender">Gender *</label>
                        <select id="editMemberGender" class="form-control" required>
                            <option value="">Select Gender</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="editMemberMobile">Mobile Number *</label>
                        <input type="tel" id="editMemberMobile" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="editMemberEmail">Email Address</label>
                        <input type="email" id="editMemberEmail" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="editMemberDob">Date of Birth</label>
                        <input type="date" id="editMemberDob" class="form-control">
                        <small class="helper-text">Stored as day and month for birthdays.</small>
                    </div>
                    <div class="form-group">
                        <label for="editMemberRole">Cell Role *</label>
                        <select id="editMemberRole" class="form-control" required>
                            <option value="">Select Role</option>
                            <option value="Cell Leader">Cell Leader</option>
                            <option value="Assistant Leader">Assistant Leader</option>
                            <option value="Member">Member</option>
                            <option value="New Member">New Member</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>First-Timer?</label>
                        <div class="highlight-toggle-row">
                            <label class="toggle-switch">
                                <input type="checkbox" id="editMemberHighlightToggle">
                                <span class="toggle-slider"></span>
                            </label>
                            <span class="toggle-label" id="editMemberHighlightText">No</span>
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn" onclick="closeModal('editMemberModal')">Cancel</button>
                        <button type="submit" class="btn btn-success">Save Changes</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add/Edit First-Timer Modal -->
    <div id="firstTimerModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3 id="firstTimerModalTitle">Add First-Timer</h3>
                <button class="close-modal" onclick="closeModal('firstTimerModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="firstTimerForm">
                    <input type="hidden" id="firstTimerId">
                    <div class="form-group">
                        <label for="firstTimerName">Name *</label>
                        <input type="text" id="firstTimerName" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="firstTimerMobile">Mobile *</label>
                        <input type="tel" id="firstTimerMobile" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="firstTimerInvitedBy">Invited By</label>
                        <input type="text" id="firstTimerInvitedBy" class="form-control" placeholder="Name">
                    </div>
                    <div class="form-group">
                        <label for="firstTimerDateJoined">Date Joined</label>
                        <input type="date" id="firstTimerDateJoined" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="firstTimerStatus">Status</label>
                        <select id="firstTimerStatus" class="form-control">
                            <option value="green">Green</option>
                            <option value="amber" selected>Amber</option>
                            <option value="red">Red</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="firstTimerFoundation">Foundation School</label>
                        <select id="firstTimerFoundation" class="form-control">
                            <option value="Yes">Yes</option>
                            <option value="Not Yet" selected>Not Yet</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="firstTimerCell">Cell</label>
                        <select id="firstTimerCell" class="form-control">
                            <option value="">Select Cell</option>
                        </select>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn" onclick="closeModal('firstTimerModal')">Cancel</button>
                        <button type="submit" class="btn btn-success" id="firstTimerSaveBtn">Save</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add/Edit Follow-up Modal -->
    <div id="followUpModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3 id="followUpModalTitle">Add Follow-up Record</h3>
                <button class="close-modal" onclick="closeModal('followUpModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="followUpForm">
                    <input type="hidden" id="followUpId">
                    <div class="form-group">
                        <label for="followUpFirstTimer">First-Timer *</label>
                        <select id="followUpFirstTimer" class="form-control" required>
                            <option value="">Select First-Timer</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="followUpDate">Date</label>
                        <input type="date" id="followUpDate" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="followUpTime">Time</label>
                        <input type="time" id="followUpTime" class="form-control">
                    </div>
                    <div class="form-group">
                        <label for="followUpComment">Comment</label>
                        <textarea id="followUpComment" class="form-control" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Visitation Arranged</label>
                        <label class="toggle-switch">
                            <input type="checkbox" id="followUpVisitationArranged">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="form-group">
                        <label for="followUpVisitationDate">Visitation Date</label>
                        <input type="date" id="followUpVisitationDate" class="form-control">
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn" onclick="closeModal('followUpModal')">Cancel</button>
                        <button type="submit" class="btn btn-success" id="followUpSaveBtn">Save</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Edit Menu Modal -->
    <div id="editMenuModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Edit Menu</h3>
                <button class="close-modal" onclick="closeModal('editMenuModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="editMenuForm">
                    <input type="hidden" id="editMenuId">
                    <div class="form-group">
                        <label for="editMenuName">Menu Name *</label>
                        <input type="text" id="editMenuName" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="editMenuIcon">Icon *</label>
                        <input type="text" id="editMenuIcon" class="form-control" placeholder="fas fa-icon-name" required>
                    </div>
                    <div class="form-group">
                        <label for="editMenuSection">Section *</label>
                        <select id="editMenuSection" class="form-control" required>
                            <option value="cell">Cell Group</option>
                            <option value="admin">Administrator</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="editMenuActive">Active</label>
                        <label class="toggle-switch">
                            <input type="checkbox" id="editMenuActiveToggle">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn" onclick="closeModal('editMenuModal')">Cancel</button>
                        <button type="submit" class="btn btn-success">Save Changes</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Edit User Modal -->
    <div id="editUserModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Edit User</h3>
                <button class="close-modal" onclick="closeModal('editUserModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="editUserForm">
                    <input type="hidden" id="editUserId">
                    <div class="form-group">
                        <label for="editUserUsername">Username *</label>
                        <input type="text" id="editUserUsername" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="editUserEmail">Email *</label>
                        <input type="email" id="editUserEmail" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="editUserPassword">Password *</label>
                        <input type="password" id="editUserPassword" class="form-control" placeholder="Leave blank to keep current password">
                    </div>
                    <div class="form-group">
                        <label for="editUserRole">Role *</label>
                        <select id="editUserRole" class="form-control" required>
                            <option value="">Select Role</option>
                            <option value="superuser">Superuser</option>
                            <option value="admin">Admin</option>
                            <option value="cell-leader">Cell Leader</option>
                            <option value="member">Member</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Restricted Menus</label>
                        <div class="multiselect-dropdown">
                            <div class="multiselect-selected" onclick="toggleDropdown('editRestrictedMenusOptions')">
                                <span>Select menus</span>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="multiselect-options" id="editRestrictedMenusOptions">
                                <!-- Options will be populated dynamically -->
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="editUserStatus">Status</label>
                        <label class="toggle-switch">
                            <input type="checkbox" id="editUserStatusToggle">
                            <span class="toggle-slider"></span>
                        </label>
                        <span id="editUserStatusText">Active</span>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn" onclick="closeModal('editUserModal')">Cancel</button>
                        <button type="submit" class="btn btn-success">Save Changes</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Edit Page Modal -->
    <div id="editPageModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Edit Menu</h3>
                <button class="close-modal" onclick="closeModal('editPageModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="editPageForm">
                    <input type="hidden" id="editPageId">
                    <div class="form-group">
                        <label for="editPageName">Menu Name *</label>
                        <input type="text" id="editPageName" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="editPageIcon">Icon (Font Awesome) *</label>
                        <input type="text" id="editPageIcon" class="form-control" list="faIconOptions" placeholder="fas fa-home" required>
                        <datalist id="faIconOptions">
                            <option value="fas fa-home"></option>
                            <option value="fas fa-users"></option>
                            <option value="fas fa-user-shield"></option>
                            <option value="fas fa-file-alt"></option>
                            <option value="fas fa-history"></option>
                            <option value="fas fa-cog"></option>
                            <option value="fas fa-church"></option>
                            <option value="fas fa-layer-group"></option>
                            <option value="fas fa-chart-line"></option>
                            <option value="fas fa-clipboard-list"></option>
                            <option value="fas fa-group"></option>
                            <option value="fas fa-clipboard-list"></option>

                        </datalist>
                        <small id="editPageIconPreview" style="display: inline-block; margin-top: 8px;">
                            <i class="fas fa-home"></i>
                        </small>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn" onclick="closeModal('editPageModal')">Cancel</button>
                        <button type="submit" class="btn btn-success">Save Changes</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Edit Report Modal -->
    <div id="editReportModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Edit Report</h3>
                <button class="close-modal" onclick="closeModal('editReportModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="editReportForm">
                    <input type="hidden" id="editReportId">
                    <input type="hidden" id="editReportCellId">
                    <div class="form-group">
                        <label for="editReportDate">Date *</label>
                        <input type="date" id="editReportDate" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="editReportTime">Time *</label>
                        <input type="time" id="editReportTime" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="editReportVenue">Venue *</label>
                        <input type="text" id="editReportVenue" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="editReportMeetingType">Meeting Type *</label>
                        <select id="editReportMeetingType" class="form-control" required>
                            <option value="">Select Type</option>
                            <option value="prayer">Prayer and Planning</option>
                            <option value="bible-study-1">Bible Study 1</option>
                            <option value="bible-study-2">Bible Study 2</option>
                            <option value="outreach">Outreach Meeting</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Attendees</label>
                        <div id="editAttendeesContainer" class="attendees-container">
                            <!-- Attendees will be populated here -->
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="editReportDescription">Description</label>
                        <textarea id="editReportDescription" class="form-control" rows="4"></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn" onclick="closeModal('editReportModal')">Cancel</button>
                        <button type="submit" class="btn btn-success">Save Changes</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Add New Menu Modal -->
    <div id="newMenuModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Add New Menu</h3>
                <button class="close-modal" onclick="closeModal('newMenuModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="newMenuForm">
                    <div class="form-group">
                        <label for="menuName">Menu Name *</label>
                        <input type="text" id="menuName" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="menuId">Menu ID *</label>
                        <input type="text" id="menuId" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="menuIcon">Icon *</label>
                        <input type="text" id="menuIcon" class="form-control" placeholder="fas fa-icon-name" required>
                    </div>
                    <div class="form-group">
                        <label for="menuSection">Section *</label>
                        <select id="menuSection" class="form-control" required>
                            <option value="cell">Cell Group</option>
                            <option value="admin">Administrator</option>
                        </select>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn" onclick="closeModal('newMenuModal')">Cancel</button>
                        <button type="submit" class="btn btn-success">Add Menu</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Add New User Modal -->
    <div id="newUserModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3>Add New User</h3>
                <button class="close-modal" onclick="closeModal('newUserModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="newUserForm">
                    <div class="form-group">
                        <label for="userUsername">Username *</label>
                        <input type="text" id="userUsername" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="userEmail">Email *</label>
                        <input type="email" id="userEmail" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="userPassword">Password *</label>
                        <input type="password" id="userPassword" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="userRole">Role *</label>
                        <select id="userRole" class="form-control" required>
                            <option value="">Select Role</option>
                            <option value="superuser">Superuser</option>
                            <option value="admin">Admin</option>
                            <option value="cell-leader">Cell Leader</option>
                            <option value="member">Member</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Restricted Menus</label>
                        <div class="multiselect-dropdown">
                            <div class="multiselect-selected" onclick="toggleDropdown('restrictedMenusOptions')">
                                <span>Select menus</span>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="multiselect-options" id="restrictedMenusOptions">
                                <!-- Options will be populated dynamically -->
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="userStatus">Status</label>
                        <label class="toggle-switch">
                            <input type="checkbox" id="userStatusToggle" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <span id="userStatusText">Active</span>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn" onclick="closeModal('newUserModal')">Cancel</button>
                        <button type="submit" class="btn btn-success">Add User</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Notification Modal -->
    <div id="notificationModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3 id="notificationModalTitle">Notification</h3>
                <button class="close-modal" onclick="closeModal('notificationModal')">&times;</button>
            </div>
            <div class="modal-body">
                <p id="notificationModalBody" style="line-height: 1.6;"></p>
            </div>
        </div>
    </div>

    <!-- Birthday Modal -->
    <div id="birthdayModal" class="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3 id="birthdayModalTitle">Birthdays</h3>
                <button class="close-modal" onclick="closeModal('birthdayModal')">&times;</button>
            </div>
            <div class="modal-body" id="birthdayModalBody"></div>
        </div>
    </div>

    <!-- Logout Confirmation Modal -->
    <div id="logoutConfirmModal" class="modal-overlay confirmation-modal">
        <div class="modal">
            <div class="modal-body">
                <div class="confirmation-icon">
                    <i class="fas fa-sign-out-alt"></i>
                </div>
                <p class="confirmation-text">
                    Are you sure you want to logout?
                </p>
                <div class="form-actions">
                    <button type="button" class="btn" onclick="closeModal('logoutConfirmModal')">Cancel</button>
                    <button type="button" class="btn btn-danger" onclick="performLogout()">Logout</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" id="mobileMenuToggle">
        <i class="fas fa-bars"></i>
    </button>
    
    <!-- Sidebar Navigation -->
    <div class="sidebar" id="sidebar">
        <div class="logo-area" id="logoLink">
            <div class="logo-placeholder" id="logoIcon">
                <i class="fas fa-church"></i>
            </div>
            <img id="logoImage" class="logo-img" style="display: none;" alt="Church Logo">
            <div class="logo-title" id="logoTitleText">Christ Embassy</div>
            <div class="logo-subtitle" id="logoSubtitleText">Church Cell Data</div>
        </div>
        
        <div class="nav-menu" id="navMenu">
            <div class="nav-item active" data-page="dashboard">
                <i class="fas fa-home"></i>
                <span>Dashboard</span>
            </div>
            <div class="nav-item" data-page="members" id="membersNav">
                <i class="fas fa-users"></i>
                <span>Members</span>
            </div>
            <div class="nav-item" data-page="first-timers" id="firstTimersNav">
                <i class="fas fa-user-check"></i>
                <span>First-Timers</span>
            </div>
            <div class="nav-item" data-page="birthdays" id="birthdaysNav">
                <i class="fas fa-birthday-cake"></i>
                <span>Birthdays</span>
            </div>

            <div class="nav-divider" id="cellGroupsDivider"></div>
            
            <div class="nav-section-title" id="cellGroupsTitle">Cell Groups</div>
            
            <!-- Cell groups will be added here dynamically -->
            <div id="cellGroupsContainer">
                <!-- Cells Template will be added here dynamically -->
            </div>
            
            <div class="nav-divider" id="adminDivider"></div>
            
            <div class="nav-section-title" id="adminTitle">Administrator</div>

            <div class="nav-item" data-page="notifications" id="notificationsNav">
                <i class="fas fa-bell"></i>
                <span>Notifications</span>
            </div>
            
            <div class="nav-item" data-page="page-management" id="pageManagementNav">
                <i class="fas fa-file-alt"></i>
                <span>Page Management</span>
            </div>
            <div class="nav-item" data-page="access-management" id="accessManagementNav">
                <i class="fas fa-user-shield"></i>
                <span>Access Management</span>
            </div>
            <div class="nav-item" data-page="sessions" id="sessionsNav">
                <i class="fas fa-history"></i>
                <span>Sessions</span>
            </div>
            <div class="nav-item" data-page="settings" id="settingsNav">
                <i class="fas fa-cog"></i>
                <span>Settings</span>
            </div>
        </div>
        
        <button class="logout-btn" id="logoutBtn">
            <i class="fas fa-sign-out-alt"></i>
            <span>Logout</span>
        </button>
    </div>
    
    <!-- Main Content Area -->
    <div class="main-content">
        <div class="notification-bell global-notification-bell">
            <div class="notification-bell-icon" id="notificationsBell" role="button" aria-label="Notifications" tabindex="0">
                <i class="fas fa-bell"></i>
                <span class="notification-badge" id="notificationsBadge">0</span>
            </div>
            <div class="notifications-dropdown" id="notificationsDropdown">
                <div class="notifications-header">Unread Notifications</div>
                <div class="notifications-list" id="notificationsList"></div>
            </div>
        </div>
        <!-- Dashboard Page (Default) -->
        <div id="dashboard" class="page-content active">
            <div class="page-header">
                <h1>Dashboard</h1>
                <div class="page-actions">
                    <button class="btn btn-success" id="addNewCellBtn">
                        <i class="fas fa-plus"></i> Add New Cell
                    </button>
                </div>
            </div>
            
            <!-- Real-time Stats -->
            <div class="stats-container" id="statsContainer">
                <!-- Stats will be updated dynamically -->
            </div>

            <div class="birthday-section">
                <div class="page-header" style="margin-top: 0;">
                    <h2>Birthdays Calendar</h2>
                </div>
                <div class="birthday-calendar" id="birthdayCalendar"></div>
            </div>
            
            <div class="page-header">
                <h2>All Cell Groups</h2>
            </div>
            
            <div class="table-container">
                <table id="cellsTable">
                    <thead>
                        <tr>
                            <th>Cell Name</th>
                            <th>Meeting Venue</th>
                            <th>Members</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="cellsTableBody">
                        <!-- Cells will be loaded dynamically -->
                    </tbody>
                </table>
            </div>
            <div class="table-pagination" id="cellsPagination"></div>
            
            <div class="page-header">
                <h2>Recent Reports (Last 7 Days)</h2>
            </div>
            
            <div class="reports-grid" id="recentReports">
                <!-- Recent reports will be loaded dynamically -->
            </div>
        </div>
        
        <!-- Members Page -->
        <div id="members" class="page-content">
            <div class="page-header">
                <h1>All Members</h1>
                <div class="page-actions">
                    <div class="search-box">
                        <input type="text" id="searchMembers" placeholder="Search members..." oninput="searchMembers()">
                    </div>
                </div>
            </div>
            
            <div class="table-container members-table-container">
                <table id="allMembersTable">
                    <thead>
                        <tr>
                            <th>Title</th>
                            <th>Name</th>
                            <th>Gender</th>
                            <th>Mobile</th>
                            <th>Email</th>
                            <th>Cell Name</th>
                            <th>Cell Role</th>
                            <th>Cell Venue</th>
                            <th>Cell Day</th>
                            <th>Cell Time</th>
                            <th>Joined Date</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="allMembersBody">
                        <!-- All members from all cells will be loaded here -->
                    </tbody>
                </table>
            </div>
            <div class="table-pagination" id="membersPagination"></div>

            <div id="membersGrid" class="members-grid">
                <!-- Member cards will be rendered here on mobile -->
            </div>
            
            <div style="text-align: center; margin-top: 20px; color: var(--gray-color);">
                Showing <span id="membersCount">0</span> members
            </div>
        </div>
        
        <!-- Dynamic cell pages will be created here -->
        <div id="dynamicCellPages"></div>

        <!-- First-Timers Page -->
        <div id="first-timers" class="page-content">
            <div class="page-header">
                <h1>First-Timers</h1>
                <div class="page-actions">
                    <button class="btn btn-success" id="addFirstTimerBtn">
                        <i class="fas fa-user-plus"></i> Add New First-Timer
                    </button>
                </div>
            </div>

            <div class="cell-tabs" id="firstTimersTabs">
                <button class="cell-tab-btn active" data-tab="list">First-Timers List</button>
                <button class="cell-tab-btn" data-tab="followups">Follow-up Records</button>
            </div>

            <div class="cell-tab-content active" id="firstTimersListTab">
                <div class="table-container">
                    <table id="firstTimersTable" class="mobile-grid-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Gender</th>
                                <th>Mobile</th>
                                <th>Email</th>
                                <th>Address</th>
                                <th>Post Code</th>
                                <th>Birthday</th>
                                <th>Age Group</th>
                                <th>Marital Status</th>
                                <th>Born Again</th>
                                <th>Speak Tongues</th>
                                <th>How Found Us</th>
                                <th>Contact Pref</th>
                                <th>Visit</th>
                                <th>Visit When</th>
                                <th>Prayer Requests</th>
                                <th>Invited By</th>
                                <th>Date Joined</th>
                                <th>Status</th>
                                <th>Foundation School</th>
                                <th>Cell</th>
                                <th>Last Follow-up</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="firstTimersBody">
                            <!-- First-timers will load here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="cell-tab-content" id="firstTimersFollowupsTab">
                <div class="page-header" style="margin-top: 0;">
                    <h2>Follow-up Records</h2>
                    <div class="page-actions">
                        <button class="btn btn-success" id="addFollowUpBtn">
                            <i class="fas fa-plus"></i> Add Record
                        </button>
                    </div>
                </div>
                <div class="table-container">
                    <table id="followUpsTable" class="mobile-grid-table">
                        <thead>
                            <tr>
                                <th>First-Timer</th>
                                <th>Date</th>
                                <th>Time</th>
                                <th>Comment</th>
                                <th>Visitation Arranged</th>
                                <th>Visitation Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="followUpsBody">
                            <!-- Follow-up records will load here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Notifications Page -->
        <div id="notifications" class="page-content">
            <div class="page-header">
                <h1>Notifications</h1>
            </div>
            <div class="cell-tabs" id="notificationsTabs">
                <button class="cell-tab-btn active" data-tab="list">All Notifications</button>
                <button class="cell-tab-btn" data-tab="send" id="notificationsSendTabBtn">Send Notification</button>
            </div>

            <div class="cell-tab-content active" id="notificationsListTab">
                <div class="page-actions" style="justify-content: flex-end; margin-bottom: 16px;">
                    <button class="btn btn-secondary" id="clearNotificationsBtn">
                        <i class="fas fa-broom"></i> Clear All
                    </button>
                </div>
                <div class="table-container">
                    <table class="mobile-grid-table" id="notificationsTable">
                        <thead>
                            <tr>
                                <th>Title</th>
                                <th>Message</th>
                                <th>Status</th>
                                <th>Created</th>
                            </tr>
                        </thead>
                        <tbody id="notificationsTableBody">
                            <!-- Notifications list -->
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="cell-tab-content" id="notificationsSendTab">
                <div class="table-container" style="padding: 24px;">
                    <form id="sendNotificationForm">
                        <div class="form-group">
                            <label for="notificationTargetRoles">Send To (Roles) *</label>
                            <select id="notificationTargetRoles" class="form-control" multiple required>
                                <option value="" disabled>Select Roles</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="notificationTargetValue">Target *</label>
                            <select id="notificationTargetValue" class="form-control" multiple required>
                                <option value="" disabled>Select Targets</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="notificationTitle">Title *</label>
                            <input type="text" id="notificationTitle" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="notificationMessage">Message *</label>
                            <textarea id="notificationMessage" class="form-control" rows="4" required></textarea>
                        </div>
                        <div class="form-group">
                            <label for="notificationType">Type</label>
                            <select id="notificationType" class="form-control">
                                <option value="info">Info</option>
                                <option value="success">Success</option>
                                <option value="warning">Warning</option>
                            </select>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-success">
                                <i class="fas fa-paper-plane"></i> Send
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Birthdays Page -->
        <div id="birthdays" class="page-content">
            <div class="page-header">
                <h1>Birthdays</h1>
                <div class="page-actions">
                    <button class="btn btn-success" id="addBirthdayBtn">
                        <i class="fas fa-plus"></i> Add Birthday
                    </button>
                </div>
            </div>

            <div class="table-container">
                <table class="mobile-grid-table" id="birthdaysTable">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Cell</th>
                            <th>Role</th>
                            <th>Birthday</th>
                            <th>Mobile</th>
                        </tr>
                    </thead>
                    <tbody id="birthdaysTableBody"></tbody>
                </table>
            </div>
        </div>

        <!-- Add Birthday Modal -->
        <div id="addBirthdayModal" class="modal-overlay">
            <div class="modal">
                <div class="modal-header">
                    <h3>Add Birthday</h3>
                    <button class="close-modal" onclick="closeModal('addBirthdayModal')">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="addBirthdayForm">
                        <div class="form-group">
                            <label for="birthdayMemberName">Member Name *</label>
                            <input type="text" id="birthdayMemberName" class="form-control" list="memberNamesList" required>
                        </div>
                        <div class="form-group">
                            <label for="birthdayMemberId">Member *</label>
                            <select id="birthdayMemberId" class="form-control" required></select>
                        </div>
                        <div class="form-group">
                            <label for="birthdayDate">Date of Birth *</label>
                            <input type="date" id="birthdayDate" class="form-control" required>
                        </div>
                        <div class="form-actions">
                            <button type="button" class="btn" onclick="closeModal('addBirthdayModal')">Cancel</button>
                            <button type="submit" class="btn btn-success">Save</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <datalist id="memberNamesList"></datalist>

        <!-- Cells Template Page (Hidden) -->
        <div id="cells-template" class="page-content" style="display: none;">
            <div class="page-header">
                <h1 id="cellPageTitle-cells-template">Cells Template</h1>
                <div class="page-actions">
                    <button class="btn add-report-btn" data-cell-id="cells-template" disabled>
                        <i class="fas fa-plus"></i> Add Report
                    </button>
                    <button class="btn btn-success add-member-btn" data-cell-id="cells-template" disabled>
                        <i class="fas fa-user-plus"></i> Add Member
                    </button>
                </div>
            </div>
            
            <div class="cell-header">
                <div class="cell-info-item">
                    <div class="info-label">Cell Name</div>
                    <div class="info-value editable-field" data-field="name" data-cell-id="cells-template">Cells Template</div>
                </div>
                <div class="cell-info-item">
                    <div class="info-label">Venue</div>
                    <div class="info-value editable-field" data-field="venue" data-cell-id="cells-template">Sample Venue</div>
                </div>
                <div class="cell-info-item">
                    <div class="info-label">Day of Meeting</div>
                    <div class="info-value editable-field" data-field="day" data-cell-id="cells-template">Friday</div>
                </div>
                <div class="cell-info-item">
                    <div class="info-label">Time</div>
                    <div class="info-value editable-field" data-field="time" data-cell-id="cells-template">7:00 PM</div>
                </div>
                <div class="cell-description">
                    <div class="info-label">Description</div>
                    <div class="info-value editable-field" data-field="description" data-cell-id="cells-template" style="min-height: 60px; padding: 10px;">
                        This is a template for new cells. Create a new cell to get started.
                    </div>
                </div>
            </div>
            
            <div class="cell-tabs" id="cellTabs-cells-template">
                <button class="cell-tab-btn active" data-tab="members">Members List</button>
                <button class="cell-tab-btn" data-tab="reports">Reports | Cell Data</button>
            </div>
            
            <div class="cell-tab-content active" id="cellTabMembers-cells-template">
                <div class="page-header">
                    <h2>Members List</h2>
                </div>
                
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Title</th>
                                <th>Name</th>
                                <th>Gender</th>
                                <th>Mobile</th>
                                <th>Cell Role</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="cellMembersBody-cells-template">
                            <!-- Members will be loaded dynamically -->
                        </tbody>
                    </table>
                </div>
                <div class="table-pagination" id="cellMembersPagination-cells-template"></div>
            </div>
            
            <div class="cell-tab-content" id="cellTabReports-cells-template">
                <div class="page-header">
                    <h2>Reports | Cell Data</h2>
                </div>
                
                <div class="search-container">
                    <div class="search-box">
                        <input type="text" id="searchReports-cells-template" placeholder="Search reports..." oninput="searchReports('cells-template')">
                    </div>
                    <div class="search-box">
                        <select id="filterYear-cells-template" onchange="searchReports('cells-template')">
                            <option value="">All Years</option>
                        </select>
                    </div>
                    <div class="search-box">
                        <select id="filterMonth-cells-template" onchange="searchReports('cells-template')">
                            <option value="">All Months</option>
                            <option value="0">January</option>
                            <option value="1">February</option>
                            <option value="2">March</option>
                            <option value="3">April</option>
                            <option value="4">May</option>
                            <option value="5">June</option>
                            <option value="6">July</option>
                            <option value="7">August</option>
                            <option value="8">September</option>
                            <option value="9">October</option>
                            <option value="10">November</option>
                            <option value="11">December</option>
                        </select>
                    </div>
                    <div class="search-box">
                        <select id="filterMeetingType-cells-template" onchange="searchReports('cells-template')">
                            <option value="">All Meeting Types</option>
                            <option value="prayer">Prayer and Planning</option>
                            <option value="bible-study-1">Bible Study 1</option>
                            <option value="bible-study-2">Bible Study 2</option>
                            <option value="outreach">Outreach Meeting</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                </div>
                
                <div id="monthlyReportsContainer-cells-template">
                    <div style="text-align: center; padding: 40px; color: var(--gray-color);">
                        This is a template cell. Create a new cell to start adding reports.
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Page Management System -->
      <div id="page-management" class="page-content">
          <div class="page-header">
              <h1>Page Management</h1>
          </div>
            
            <div class="table-container">
                <table id="pageManagementTable" class="mobile-grid-table">
                    <thead>
                        <tr>
                            <th>Menu Name</th>
                            <th>Menu ID</th>
                            <th>Icon</th>
                            <th>Section</th>
                            <th>Active</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="pageManagementBody">
                        <!-- Pages will be loaded dynamically -->
                    </tbody>
                </table>
            </div>
            <div class="table-pagination" id="pageManagementPagination"></div>
        </div>
        
        <!-- Access Management System -->
        <div id="access-management" class="page-content">
            <div class="page-header">
                <h1>Access Management</h1>
                <div class="page-actions">
                    <button class="btn btn-success" id="addNewUserBtn">
                        <i class="fas fa-user-plus"></i> Add New User
                    </button>
                </div>
            </div>
            
            <div class="table-container">
                <table id="accessManagementTable" class="mobile-grid-table">
                    <thead>
                        <tr>
                            <th>Username</th>
                            <th>Email</th>
                            <th>Password</th>
                            <th>Role</th>
                            <th>Restricted Menus</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="accessManagementBody">
                        <!-- Users will be loaded dynamically -->
                    </tbody>
                </table>
            </div>
            <div class="table-pagination" id="accessPagination"></div>
        </div>
        
        <!-- Sessions Page -->
        <div id="sessions" class="page-content">
            <div class="page-header">
                <h1>User Sessions</h1>
            </div>
            
            <div class="table-container">
                <table id="sessionsTable" class="mobile-grid-table">
                    <thead>
                        <tr>
                            <th>User</th>
                            <th>Start Time</th>
                            <th>Logout Time</th>
                            <th>IP Address</th>
                            <th>Browser</th>
                            <th>OS</th>
                            <th>Timezone</th>
                            <th>Active Time</th>
                            <th>Idle Time</th>
                            <th>Total Time</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="sessionsBody">
                        <!-- Sessions will be loaded dynamically -->
                    </tbody>
                </table>
            </div>
            <div class="table-pagination" id="sessionsPagination"></div>
        </div>
        
        <!-- Settings Page -->
        <div id="settings" class="page-content">
            <div class="page-header">
                <h1>Settings</h1>
            </div>
            
            <div class="settings-grid">
                <div class="settings-card">
                    <div class="page-header" style="margin-top: 0;">
                        <h2>Appearance & Theme</h2>
                    </div>
                    
                    <div class="theme-options">
                        <div class="theme-option theme-light active" data-theme="light">
                            <div class="theme-icon">
                                <i class="fas fa-sun"></i>
                            </div>
                            <div class="theme-name">Light</div>
                        </div>
                        <div class="theme-option theme-dark" data-theme="dark">
                            <div class="theme-icon">
                                <i class="fas fa-moon"></i>
                            </div>
                            <div class="theme-name">Dark</div>
                        </div>
                        <div class="theme-option theme-auto" data-theme="auto">
                            <div class="theme-icon">
                                <i class="fas fa-adjust"></i>
                            </div>
                            <div class="theme-name">Auto</div>
                        </div>
                    </div>
                </div>
                
                <div class="settings-card">
                    <div class="page-header" style="margin-top: 0;">
                        <h2>Logo Upload</h2>
                    </div>
                    
                    <div class="file-upload">
                        <label for="logoUpload" class="file-upload-label">
                            <i class="fas fa-upload"></i> Upload Church Logo
                        </label>
                        <input type="file" id="logoUpload" class="file-upload-input" accept="image/*">
                    </div>
                    
                    <div class="current-logo">
                        <p>Current Logo:</p>
                        <div id="currentLogoPreview">
                            <div class="logo-placeholder" style="font-size: 3rem;">
                                <i class="fas fa-church"></i>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="settings-card logo-text-settings">
                    <div class="page-header" style="margin-top: 0;">
                        <h2>Logo Text Settings</h2>
                    </div>
                    
                    <div class="form-group">
                        <label for="logoTitle">Church Name</label>
                        <input type="text" id="logoTitle" class="form-control" value="Christ Embassy">
                    </div>
                    
                    <div class="form-group">
                        <label for="logoSubtitle">Church Subtitle</label>
                        <input type="text" id="logoSubtitle" class="form-control" value="Church Cell Data">
                    </div>
                    
                    <div class="form-actions">
                        <button class="btn btn-success" id="saveLogoTextBtn">
                            <i class="fas fa-save"></i> Save Logo Text
                        </button>
                    </div>
                </div>

                <div class="settings-card health-check">
                    <div class="page-header" style="margin: 0 0 12px;">
                        <h2>System Health</h2>
                    </div>
                    <button class="btn" id="healthCheckBtn">
                        <i class="fas fa-heartbeat"></i> Check Database
                    </button>
                    <div class="health-status" id="healthCheckStatus">Status: Not checked</div>
                </div>
            </div>
        </div>
        
        <!-- Footer -->
        <div class="footer">
            <div class="footer-left">
                 <span id="currentYear"></span> Christ Embassy Church Cell Management System
            </div>
        </div>
    </div>

    <script src="/js/core/app.js"></script>
    <script src="/js/features/cells.js"></script>
    <script src="/js/features/members.js"></script>
    <script src="/js/features/reports.js"></script>
    <script src="/js/features/firsttimers.js"></script>
    <script src="/js/features/access.js"></script>
    <script src="/js/features/sessions.js"></script>
</body>
</html>
